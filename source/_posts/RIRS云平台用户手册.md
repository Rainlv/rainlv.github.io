---
title: RIRS云平台用户手册
date: 2023-08-21 20:02:45
tags:
---

> 版本：v1.1
>
> 日期：2023/8/21
>
> 维护：xuanh.w@outlook.com

## 使用说明

### 登录注册

暂**未开放**用户注册功能，如需使用请联系管理员[@xuanh.w](mailto:xuanh.w@outlook.com)授权。 

![image-20230821200831446](http://qiniu.rainna.xyz/image-20230821200833310.png)

### 用户界面

![image-20230821200918422](http://qiniu.rainna.xyz/image-20230821200918422.png)

用户界面包含`总览、任务中心、样本仓库、模型库、容器管理、用户资源`六大模块。

- 总览：大致暂时用户目前的资源和任务等，截至目前，实现为假数据，仅供观看
- 任务中心：创建任务，管理任务，查看任务日志等
- 样本仓库：查看样本、上传样本
- 模型库：查看模型、管理模型
- 容器管理：容器与镜像管理，代码在线编辑与运行
- 用户资源：开发中...

### 容器管理

> 是最常用也是最核心的模块，代码在线编辑和运行，创建和发布模型等

![image-20230821201925231](http://qiniu.rainna.xyz/image-20230821201925231.png)

在使用前需要先了解镜像和容器的概念。

镜像定义来自Docker容器化技术中的镜像概念，可以理解为**虚拟机的模板、快照**等，可以根据镜像快速创建出一个容器(虚拟机)。容器，即是由镜像创建出的虚拟机，可以通过Editor访问操作容器。

镜像由名称和版本标识，一个名称下可以有多个版本。为了便于用户访问与使用镜像，引出`Editor`的概念。

Editor是用户操作和访问容器(虚拟机)的窗口，目前支持`code-server`和`web-top`两种交互方式。`code-server`可以理解为web版的vscode，提供与桌面版vscode相同的开发体验。`web-top`即是web桌面，目前仅支持xfce桌面，包含`web-top`Editor的镜像创建出的容器具有桌面环境，否则为命令行环境(无法运行依赖桌面的程序)。



#### 新建容器

> 创建一个可交互的虚拟机

根据需求选择镜像创建一个虚拟机，预定义了一部分镜像。如`pytorch`镜像有多个版本，`1.13_11.6_8`版本代表pytorch版本为1.13，cuda为11.6，cudnn为8.x版本。

![image-20230821202930566](http://qiniu.rainna.xyz/image-20230821202930566.png)

我们以`pytorch:1.13_11.6_8`为例创建一个容器。

1. 单击右侧的新建容器，可以根据需要选择所需的资源，CPU核心数目前支持1-8核，内存支持1-16G，显卡支持0-5。分配的最终资源大小根据资源池中所剩资源可能会动态调整，实际资源浮动率在0.5-2倍，即在创建时指定8核，最多可能可以使用16核的资源，最低为4核的资源；内存同理。显卡资源为独占，不会动态调整。申请显卡资源数量大于1时，需要向管理员申请。用户可调配的默认资源数为1张显卡1个容器，即当创建第二个容器时，也需要管理员审核。

![image-20230821203301275](http://qiniu.rainna.xyz/image-20230821203301275.png)

2. 容器信息。创建完成后，可以在`容器列表`中看到容器的相关信息，当状态切换到运行中时代表容器创建完成，使用默认镜像创建通常1min内可以创建完成，需要用户点击`容器列表`旁的刷新符号手动刷新查看最新状态。

![image-20230821203740250](http://qiniu.rainna.xyz/image-20230821203740250.png)

3. 访问Editor。当容器状态为**运行中**时可以点击`Editor`访问vscode，或`Web-VNC`访问桌面。

![image-20230821204057320](http://qiniu.rainna.xyz/image-20230821204057320.png)

![image-20230821204146310](http://qiniu.rainna.xyz/image-20230821204146310.png)

3.1 **web-top访问**。单击`Web VNC`

![image-20230821204254275](http://qiniu.rainna.xyz/image-20230821204254275.png)

![image-20230821204437424](http://qiniu.rainna.xyz/image-20230821204437424.png)

<u>**直接点击连接无法连接到桌面，需要点击右侧齿轮图标设置URL**</u>

![image-20230821204615028](http://qiniu.rainna.xyz/image-20230821204615028.png)

此处的值设置需要参考当前页面URL值，如下图红框部分。最终值为：`红框部分值+/websockify`，以下图为例，值为：`web-top/e37b1e82-6eb6-4ba6-874f-04909b5498fd/websockify`

![image-20230821205040353](http://qiniu.rainna.xyz/image-20230821205040353.png)

修改完毕后，点击连接，若提示无法连接服务器，请检查输入路径是否有误！

正常情况如下图所示：

![image-20230821205144040](http://qiniu.rainna.xyz/image-20230821205144040.png)

输入密码为：`WHU@123`，回车或单击`Send Credentials`按钮，即可进入桌面。默认未安装显卡驱动和cuda，请自行安装。

![image-20230821205259365](http://qiniu.rainna.xyz/image-20230821205259365.png)

3.2 **code-server访问。**

单击Editor即可访问code-server页面，但是受限于校园网内网环境，无https签名证书，部分功能(如图片和pdf浏览)可能受限，可自行[下载](http://qiniu.rainna.xyz/rootCA.crt)自签名证书安装后使用，windows系统双击安装，其余操作系统请参考网络。



3.3 **特殊目录介绍**

`/data`下有`private`、`public`、`share`、`user`目录

- private：读写。私有空间，仅当前登录用户可见
- public：只读。公共空间，存储管理员发布的资源，通常为样本
- share：只读。用户共享空间，存储用户自发共享的文件（未实现）。
- user：读写。私有空间，是private下的子集，为便利用户操作而独立出来。

各个目录下的二级目录代表数据源，目前有`default`、`nfs_ds1`、`nfs_ds2`数据源

- default：总大小20T。默认数据源，/data/user其实就是private空间下的默认数据源的链接。
- nfs_ds1：总大小100T
- nfs_ds2：总大小100T

**！！注意：请使用`/data/user`目录存储需要持久化的数据，如代码等，该目录下的数据在重建容器后仍然存在，否则数据与容器绑定，删除容器后丢失！！**



### 其他

....
